<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Click Combat RPG</title>
<style>
body {
    background:#0b0b0b;
    color:#ddd;
    font-family: Arial, sans-serif;
    text-align:center;
}
.container {
    max-width:900px;
    margin:auto;
}
.bar {
    width:100%;
    background:#222;
    border-radius:10px;
    overflow:hidden;
    margin:5px 0;
}
.bar-fill {
    height:18px;
    background:linear-gradient(90deg,#6f00ff,#00ffcc);
}
button {
    padding:10px 20px;
    background:#6f00ff;
    border:none;
    color:white;
    cursor:pointer;
    border-radius:6px;
    margin:5px;
}
button:hover { background:#8a2bff; }
.stat-box {
    display:grid;
    grid-template-columns: repeat(2,1fr);
    gap:10px;
}
.card {
    background:#151515;
    padding:15px;
    border-radius:10px;
}
.enemy {
    font-size:18px;
    color:#ff6666;
}
.log {
    height:120px;
    overflow-y:auto;
    background:#111;
    padding:10px;
    text-align:left;
}
</style>
</head>
<body>

<div class="container">
<h1>‚öîÔ∏è Click Combat RPG ‚öîÔ∏è</h1>

<div class="card">
Niveau: <span id="level"></span> |
XP: <span id="xp"></span>/<span id="xpNeed"></span> |
Points de stats: <span id="statPoints"></span>
<div class="bar"><div id="xpBar" class="bar-fill"></div></div>
</div>

<div class="card enemy">
Ennemi: <span id="enemyName"></span><br>
PV: <span id="enemyHp"></span>/<span id="enemyMaxHp"></span>
<div class="bar"><div id="enemyHpBar" class="bar-fill" style="background:#ff3333"></div></div>
</div>

<button onclick="attack()">‚öîÔ∏è Attaquer</button>

<div class="card">
<h3>Stats</h3>
<div class="stat-box">
<div>Force: <span id="str"></span> <button onclick="addStat('str')">+</button></div>
<div>D√©fense: <span id="def"></span> <button onclick="addStat('def')">+</button></div>
<div>Agilit√©: <span id="agi"></span> <button onclick="addStat('agi')">+</button></div>
<div>Chance: <span id="luck"></span> <button onclick="addStat('luck')">+</button></div>
</div>
</div>

<div class="card">
<h3>Journal de combat</h3>
<div id="log" class="log"></div>
</div>
</div>

<script>
let player = JSON.parse(localStorage.getItem("player")) || {
    level:1, xp:0, xpNeed:100,
    statPoints:0,
    str:1, def:1, agi:1, luck:1
};

let enemy = {};

const enemies = [
    {name:"Gobelin", hp:30, dmg:5, xp:20},
    {name:"Loup Sauvage", hp:40, dmg:6, xp:25},
    {name:"Bandit", hp:55, dmg:8, xp:35},
    {name:"Chevalier Noir", hp:90, dmg:12, xp:60},
    {name:"D√©mon", hp:150, dmg:18, xp:100}
];

function newEnemy() {
    let e = enemies[Math.floor(Math.random()*enemies.length)];
    enemy = {...e, maxHp:e.hp};
    log("‚ö†Ô∏è Un " + enemy.name + " appara√Æt !");
}

function attack() {
    let dodge = Math.random()*100 < enemy.dmg + player.agi;
    if(dodge) {
        log("üí® Vous esquivez l'attaque !");
    } else {
        let crit = Math.random()*100 < player.luck*2;
        let dmg = player.str * (crit ? 2 : 1);
        enemy.hp -= dmg;
        log("üó°Ô∏è Vous infligez " + dmg + (crit?" (CRIT)":""));
    }

    if(enemy.hp <= 0) {
        win();
        return;
    }

    let enemyDmg = Math.max(1, enemy.dmg - player.def);
    playerHpLoss(enemyDmg);
}

function playerHpLoss(dmg) {
    log("üí• L'ennemi vous frappe (" + dmg + ")");
}

function win() {
    log("üèÜ Ennemi vaincu ! +" + enemy.xp + " XP");
    gainXP(enemy.xp);
    newEnemy();
}

function gainXP(xp) {
    player.xp += xp;
    while(player.xp >= player.xpNeed) {
        player.xp -= player.xpNeed;
        player.level++;
        player.statPoints += 5;
        player.xpNeed = Math.floor(player.xpNeed * 1.5);
        log("‚¨ÜÔ∏è Niveau " + player.level + " atteint !");
    }
    save();
}

function addStat(stat) {
    if(player.statPoints <= 0) return;
    player[stat]++;
    player.statPoints--;
    save();
}

function save() {
    localStorage.setItem("player", JSON.stringify(player));
    updateUI();
}

function updateUI() {
    level.textContent = player.level;
    xp.textContent = Math.floor(player.xp);
    xpNeed.textContent = player.xpNeed;
    statPoints.textContent = player.statPoints;
    str.textContent = player.str;
    def.textContent = player.def;
    agi.textContent = player.agi;
    luck.textContent = player.luck;

    xpBar.style.width = (player.xp/player.xpNeed*100)+"%";
    enemyHp.textContent = Math.max(0,enemy.hp);
    enemyMaxHp.textContent = enemy.maxHp;
    enemyHpBar.style.width = (enemy.hp/enemy.maxHp*100)+"%";
    enemyName.textContent = enemy.name;
}

function log(txt) {
    let l = document.getElementById("log");
    l.innerHTML += txt + "<br>";
    l.scrollTop = l.scrollHeight;
}

newEnemy();
updateUI();
</script>
</body>
</html>

